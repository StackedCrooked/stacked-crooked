<html>
<body>
<div style="position: relative; width: 100%;  height: 80%;">
    <label for="input" style="width: 100%; height: 100%;"></label>
    <textarea id="input" style="position: relative; width: 100%; height: 100%;"></textarea>
</div>
<div style="position: relative; height:  20%; width: 100%;">
    <button id="btn" style="position: relative; width: 20%; height: 23px; " onclick="alert('compiling');">Compile!</button>
</div>


<script type="text/javascript">
    var Chat = {};
    Chat.input = document.getElementById("input");
    Chat.inputMargin = 10;
    Chat.init = function () {
        Chat.insertTimeoutLoop();
    };

    Chat.rebuildLayout = function () {
        while (window.innerWidth - Chat.input.clientWidth > Chat.inputMargin) Chat.input.cols += 1;
        while (window.innerHeight - Chat.input.clientHeight > Chat.inputMargin) Chat.input.rows += 1;
    };

    Chat.insertTimeoutLoop = function() {
        //Chat.rebuildLayout();
        setTimeout(Chat.insertTimeoutLoop, 100);
    };

    Chat.send = function (message) {
        var httpRequest = new XMLHttpRequest();
        httpRequest.open("GET", "http://localhost:4000/" + message, true);
        httpRequest.onreadystatechange = function () {
            if (httpRequest.readyState == 4) {
                if (httpRequest.status == 200) {
                    Chat.display(httpRequest.responseText);
                }
                else {
                    Chat.display("Readystate is: " + httpRequest.status);
                    Chat.display("Oops, it doesn't work...\n" +
                            "- make sure the server is running (ruby webserver.rb)\n" +
                            "- use this url: http://localhost:4000 (and not the local cmd.html)");
                }
            }
        };
        httpRequest.send();
    };
    window.onload = Chat.init();
</script>

</body>
</html>
