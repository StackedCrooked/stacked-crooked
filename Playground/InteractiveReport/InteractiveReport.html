
<!--<meta http-equiv="refresh" content="1" />-->
<head>
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
        var app = {
            "name": "TCP Graphs",
            "progress": 80
        };
    </script>
</head>
    <style type="text/css">


        html, body { position: relative; font-family: monospace; width: 100%; height: 100%;   }
        .content { position: relative; font-family: monospace; width: 100%; height: 100%;   }

        .hbox {
            display: box; display: -webkit-box; display: -moz-box; position: relative;   
            box-orient: horizontal; -webkit-box-orient: horizontal; -moz-box-orient: horizontal;
            box-align: stretch; -webkit-box-align: stretch; -moz-box-align: stretch;
        }

        .vbox {
            display: box; display: -webkit-box; display: -moz-box;
            position: relative;  
            box-orient: vertical; -webkit-box-orient: vertical; -moz-box-orient: vertical;
            box-align: stretch; -webkit-box-align: stretch; -moz-box-align: stretch;
        }

        .f0 {
            display: box; display: -webkit-box; display: -moz-box;
            position: relative;
            box-flex: 0.0; -webkit-box-flex: 0.0; -moz-box-flex: 0.0;
        }

        .f1 {
            display: box; display: -webkit-box; display: -moz-box;
            position: relative;
            box-flex: 1.0; -webkit-box-flex: 1.0; -moz-box-flex: 1.0;
        }


    </style>

<body>

    <div class="hbox f1">
        <div class="vbox f1">
            <div id="cwnd_graph" style="width: 800px; height: 300px;"></div>
            <div id="segments_graph" style="width: 800px; height: 300px;"></div>
            <div id="rtt_graph" style="width: 800px; height: 300px;"></div>
            <div id="rwnd_graph" style="width: 800px; height: 300px;"></div>
        </div>
        <div class="vbox f1">
            <div class="hbox f0">
                <b>Settings</b>
                <ul id="fields" >
                </ul>
            </div>
            <div class="hbox f1">
                <textarea type="text" id="input" style="font-family: monospace; width:500px; height:200px; white-space: nowrap;" onkeyup="refresh();">
                </textarea>
            </div>
        </div>
    </div>
    <!--<div id="summary" style="width: 400; height: 100px;"></div>-->
</body>

<script>


function make_tag(tagname, text) {
    return "<" + tagname + ">" + text + "</" + tagname + ">";
}

function pre(text) {
    return make_tag(pre, text)
}

function print(name, obj) {
    document.getElementById('summary').innerHTML = "<br><strong>" + name + "<pre>" + JSON.stringify(obj, null, 2) + "</pre>";
}

function parse_csv(stringrep) {
    lines = stringrep.split("\n")
    headers = lines[0].split(',')
    console.log("headers=" + headers + " headers.length=" + headers.length)

    lists = {};


    for (var i = 0; i != headers.length; ++i) {
        var header = headers[i];
        header = header.trim();
        lists[headers[i]] = []
    }

    for (var li = 1; li != lines.length; ++li) {
        var fields = lines[li].split(',');
        if (fields.length != headers.length) {
            break
        }
        //console.log("fields=" + fields + " fields.length=" + fields.length)
        for (var fi = 0; fi != headers.length; ++fi) {
            var name = headers[fi];
            var value = fields[fi].trim();
            lists[name].push(value);
        }
    }

    return lists
}

//document.getElementById('input').value = "speed,rtt,cwnd\n111,11,1\n222,22,2\n333,33,3"


document.getElementById('input').value = `# Flow, Port, Time[ns], Duration[ns], Current Congestion Window[bytes], Maximum Congestion Window[bytes], Minimum Congestion Window[bytes], Current Receive Window[bytes], Maximum Receive Window[bytes], Minimum Receive Window[bytes], Current RTT[ns], Maximum RTT[ns], Minimum RTT[ns], Current SlowStart[bytes], Maximum SlowStart[bytes], Minimum SlowStart[bytes], Rx headers[bytes], Rx payload[bytes], Rx total[bytes], Rx segments, Out of order segments, Tx headers[bytes], Tx payload[bytes], Tx total[bytes], Tx segments, Slow retransmissions, Fast retransmissions, Total retransmissions
downstream_01,CMTS,1506000377000000000,1000000000,651160,2041810,597870,16776960,16776960,16776960,7228658,198312843,3453760,597870,1600890,597870,231160,0,231160,6447,0,570480,41645040,42215520,28524,0,317,317
downstream_01,CMTS,1506000378000000000,1000000000,767960,767960,651161,16776960,16776960,16776960,4296117,10221293,3355782,597870,597870,597870,5000,0,5000,250,0,1285840,93866320,95152160,64292,0,0,0
downstream_01,CMTS,1506000379000000000,1000000000,895002,895002,767961,16776960,16776960,16776960,7246899,8420821,3727047,597870,597870,597870,5000,0,5000,250,0,1492140,108926220,110418360,74607,0,0,0
downstream_01,CMTS,1506000380000000000,1000000000,658462,1523510,597870,16776960,16776960,16776960,8256772,10372078,3776930,597870,745695,597870,82848,0,82848,1762,0,1479180,107980140,109459320,73959,0,66,66
downstream_01,CMTS,1506000381000000000,1000000000,773801,773801,658463,16776960,16776960,16776960,4353510,8405241,4090328,597870,597870,597870,5000,0,5000,250,0,1302780,95102940,96405720,65139,0,0,0
downstream_01,CMTS,1506000382000000000,1000000000,892060,892060,773802,16776960,16776960,16776960,5286772,8404303,4102006,597870,597870,597870,5000,0,5000,250,0,1502800,109704400,111207200,75140,0,0,0
downstream_01,CMTS,1506000383000000000,1000000000,635102,1487010,593490,16776960,16776960,16776960,5227460,9342318,3588685,593490,742410,593490,59408,0,59408,1463,0,1565900,114310700,115876600,78295,0,12,12
downstream_01,CMTS,1506000384000000000,1000000000,748984,748984,635103,16776960,16776960,16776960,4295441,9455189,4121760,593490,593490,593490,5160,0,5160,258,0,1254620,91587260,92841880,62731,0,0,0
downstream_01,CMTS,1506000385000000000,1000000000,871622,871622,748985,16776960,16776960,16776960,4625651,8439051,3998284,593490,593490,593490,5000,0,5000,250,0,1462920,106793160,108256080,73146,0,0,0
downstream_01,CMTS,1506000386000000000,1000000000,946106,946106,871623,16776960,16776960,16776960,4817477,8369689,4117827,593490,593490,593490,5000,0,5000,250,0,1593860,116351780,117945640,79693,0,0,0
downstream_01,CMTS,1506000387000000000,1000000000,748983,1975015,623055,16776960,16776960,16776960,7347982,11172506,3594768,623055,776355,593490,88428,0,88428,1865,0,1352020,98697460,100049480,67601,0,41,41
downstream_01,CMTS,1506000388000000000,1000000000,884787,884787,748984,16776960,16776960,16776960,8304828,8478366,3586067,623055,623055,623055,5000,0,5000,250,0,1470440,107342120,108812560,73522,0,0,0
downstream_01,CMTS,1506000389000000000,1000000000,775260,1405250,716130,16776960,16776960,16776960,5229135,10246000,4094356,716130,716130,623055,25456,0,25456,896,0,1570200,114624600,116194800,78510,0,1,1
downstream_01,CMTS,1506000390000000000,1000000000,731469,1149385,585825,16776960,16776960,16776960,8247274,8398970,3634280,585825,716130,585825,21604,0,21604,773,0,1243020,90740460,91983480,62151,0,1,1
downstream_01,CMTS,1506000391000000000,1000000000,849722,849722,731470,16776960,16776960,16776960,5130119,8370094,3495729,585825,585825,585825,5000,0,5000,250,0,1453340,106093820,107547160,72667,0,0,0
downstream_01,CMTS,1506000392000000000,1000000000,959228,959228,849723,16776960,16776960,16776960,7225307,8421115,4119788,585825,585825,585825,5000,0,5000,250,0,1585700,115756100,117341800,79285,0,0,0
downstream_01,CMTS,1506000393000000000,1000000000,699342,1875005,589110,16776960,16776960,16776960,4370475,9687790,3963667,589110,712845,585825,73356,0,73356,1797,0,1305280,95285440,96590720,65264,0,9,9
downstream_01,CMTS,1506000394000000000,1000000000,817602,817602,699343,16776960,16776960,16776960,5996916,8372454,4105886,589110,589110,589110,5020,0,5020,251,0,1383040,100961920,102344960,69152,0,0,0
downstream_01,CMTS,1506000395000000000,1000000000,924182,924182,817603,16776960,16776960,16776960,4481423,8438796,4107441,589110,589110,589110,4980,0,4980,249,0,1542960,112636080,114179040,77148,0,0,0
downstream_01,CMTS,1506000396000000000,1000000000,753360,1509640,607725,16776960,16776960,16776960,5176069,8595330,3397828,607725,753360,589110,75012,0,75012,1532,0,1273320,92952360,94225680,63666,0,24,24
downstream_01,CMTS,1506000397000000000,1000000000,870160,870160,753361,16776960,16776960,16776960,4584783,8413382,4106219,607725,607725,607725,5000,0,5000,250,0,1468800,107222400,108691200,73440,0,0,0
downstream_01,CMTS,1506000398000000000,1000000000,638020,1463285,586920,16776960,16776960,16776960,7283646,9579975,3976064,586920,730365,586920,71876,0,71876,1465,0,1503540,109758420,111261960,75177,0,16,16
downstream_01,CMTS,1506000399000000000,1000000000,751906,751906,638021,16776960,16776960,16776960,4366724,8468676,4106538,586920,586920,586920,5000,0,5000,250,0,1252140,91406220,92658360,62607,0,0,0
downstream_01,CMTS,1506000400000000000,1000000000,871625,871625,751907,16776960,16776960,16776960,4945721,8494147,4044807,586920,586920,586920,5000,0,5000,250,0,1467000,107091000,108558000,73350,0,0,0
downstream_01,CMTS,1506000401000000000,1000000000,970938,970938,871626,16776960,16776960,16776960,8275880,8433640,4154699,586920,586920,586920,5000,0,5000,250,0,1593120,116297760,117890880,79656,0,0,0
downstream_01,CMTS,1506000402000000000,1000000000,725629,1451970,593490,16776960,16776960,16776960,6790638,9417058,3405598,593490,724890,586920,62628,0,62628,1522,0,1310140,95640220,96950360,65507,0,7,7
downstream_01,CMTS,1506000403000000000,1000000000,842423,842423,725630,16776960,16776960,16776960,7258228,8489494,4102803,593490,593490,593490,5000,0,5000,250,0,1426120,104106760,105532880,71306,0,0,0
downstream_01,CMTS,1506000404000000000,1000000000,649719,1428245,594585,16776960,16776960,16776960,5260174,10141268,3512068,594585,730365,593490,43160,0,43160,1465,0,1522920,111173160,112696080,76146,0,3,3
downstream_01,CMTS,1506000405000000000,1000000000,765040,765040,649720,16776960,16776960,16776960,4462660,9389892,3495058,594585,594585,594585,5460,0,5460,273,0,1302040,95048920,96350960,65102,0,0,0
downstream_01,CMTS,1506000406000000000,1000000000,880380,880380,765041,16776960,16776960,16776960,4867052,8509809,4134431,594585,594585,594585,5000,0,5000,250,0,1477540,107860420,109337960,73877,0,0,0
downstream_01,CMTS,1506000407000000000,1000000000,816143,1408535,719415,16776960,16776960,16776960,4218169,10365771,3876305,719415,719415,594585,25012,0,25012,875,0,1503420,109749660,111253080,75171,0,1,1
downstream_01,CMTS,1506000408000000000,1000000000,931483,931483,817600,16776960,16776960,16776960,8383313,8402715,4135009,719415,719415,719415,5000,0,5000,250,0,1553580,113411340,114964920,77679,0,0,0
downstream_01,CMTS,1506000409000000000,1000000000,646786,1404155,595680,16776960,16776960,16776960,5259259,9861506,3503121,595680,719415,595680,43844,0,43844,1495,0,1557160,113672680,115229840,77858,0,2,2
downstream_01,CMTS,1506000410000000000,1000000000,763586,763586,648240,16776960,16776960,16776960,4367374,9424530,3735311,595680,595680,595680,5040,0,5040,252,0,1275560,93115880,94391440,63778,0,0,0
downstream_01,CMTS,1506000411000000000,1000000000,902317,902317,763587,16776960,16776960,16776960,6351621,8522234,3576806,595680,595680,595680,5020,0,5020,251,0,1486280,108498440,109984720,74314,0,0,0
downstream_01,CMTS,1506000412000000000,1000000000,649702,1457080,595680,16776960,16776960,16776960,4348334,9362408,3875760,595680,744600,595680,42424,0,42424,1421,0,1508440,110116120,111624560,75422,0,3,3
downstream_01,CMTS,1506000413000000000,1000000000,765040,765040,649703,16776960,16776960,16776960,4393444,9411125,4023861,595680,595680,595680,5000,0,5000,250,0,1283500,93695500,94979000,64175,0,0,0
downstream_01,CMTS,1506000414000000000,1000000000,878921,878921,765041,16776960,16776960,16776960,4260186,8508207,4024565,595680,595680,595680,5000,0,5000,250,0,1488080,108629840,110117920,74404,0,0,0
downstream_01,CMTS,1506000415000000000,1000000000,800081,1493215,745695,16776960,16776960,16776960,6225958,8919992,3503813,745695,745695,595680,37360,0,37360,937,0,1580060,115344380,116924440,79003,0,5,5
downstream_01,CMTS,1506000416000000000,1000000000,754825,1206690,602250,16776960,16776960,16776960,4296399,9296306,3981713,602250,745695,602250,27008,0,27008,810,0,1255360,91641280,92896640,62768,0,5,5
downstream_01,CMTS,1506000417000000000,1000000000,871621,871621,754826,16776960,16776960,16776960,4545539,8390158,3897681,602250,602250,602250,4980,0,4980,249,0,1462780,106782940,108245720,73139,0,0,0
downstream_01,CMTS,1506000418000000000,1000000000,950468,950468,871622,16776960,16776960,16776960,4903431,8406506,4125273,602250,602250,602250,5020,0,5020,251,0,1599700,116778100,118377800,79985,0,0,0
downstream_01,CMTS,1506000419000000000,1000000000,694962,1493215,583635,16776960,16776960,16776960,8276809,10376332,4113933,583635,715035,583635,58948,0,58948,1542,0,1339780,97803940,99143720,66989,0,6,6
downstream_01,CMTS,1506000420000000000,1000000000,808840,808840,694963,16776960,16776960,16776960,4167162,8457733,3856641,583635,583635,583635,5020,0,5020,251,0,1377020,100522460,101899480,68851,0,0,0
downstream_01,CMTS,1506000421000000000,1000000000,946136,946136,814680,16776960,16776960,16776960,7225166,8412949,3635724,583635,583635,583635,5000,0,5000,250,0,1560020,113881460,115441480,78001,0,0,0
downstream_01,CMTS,1506000422000000000,1000000000,719783,1423500,586920,16776960,16776960,16776960,4306648,9348626,3788469,586920,727080,583635,41476,0,41476,1391,0,1256740,91742020,92998760,62837,0,2,2
downstream_01,CMTS,1506000423000000000,1000000000,857051,857051,719784,16776960,16776960,16776960,4300399,11469272,3540240,586920,586920,586920,4940,0,4940,247,0,1401940,102341620,103743560,70097,0,0,0
downstream_01,CMTS,1506000424000000000,1000000000,934402,934402,857052,16776960,16776960,16776960,4633993,12448911,4110688,586920,586920,586920,4900,0,4900,245,0,1546160,112869680,114415840,77308,0,0,0
downstream_01,CMTS,1506000425000000000,1000000000,816140,1411090,716130,16776960,16776960,16776960,4294760,12349707,4035676,716130,716130,586920,25168,0,25168,878,0,1480260,108058980,109539240,74013,0,1,1
downstream_01,CMTS,1506000426000000000,1000000000,919820,919820,816141,16776960,16776960,16776960,8333977,12442561,3692310,716130,716130,716130,4840,0,4840,242,0,1502300,109667900,111170200,75115,0,0,0
downstream_01,CMTS,1506000427000000000,1000000000,668683,1487010,598965,16776960,16776960,16776960,8260208,12449132,3432319,598965,742410,598965,58756,0,58756,1508,0,1449640,105823720,107273360,72482,0,6,6
downstream_01,CMTS,1506000428000000000,1000000000,788402,788402,668684,16776960,16776960,16776960,4319961,12268292,4092567,598965,598965,598965,4860,0,4860,243,0,1276620,93193260,94469880,63831,0,0,0
downstream_01,CMTS,1506000429000000000,1000000000,900821,900821,788403,16776960,16776960,16776960,6548119,12372410,4095850,598965,598965,598965,4860,0,4860,243,0,1474060,107606380,109080440,73703,0,0,0
downstream_01,CMTS,1506000430000000000,1000000000,813222,1648705,739125,16776960,16776960,16776960,4340813,12501538,4052665,739125,739125,598965,35316,0,35316,1034,0,1511000,110303000,111814000,75550,0,2,2
downstream_01,CMTS,1506000431000000000,1000000000,919818,919818,814680,16776960,16776960,16776960,6083524,12514042,4112403,739125,739125,739125,4860,0,4860,243,0,1505820,109924860,111430680,75291,0,0,0
downstream_01,CMTS,1506000432000000000,1000000000,675985,1812590,591300,16776960,16776960,16776960,4211151,12353322,3863433,591300,739125,591300,55468,0,55468,1665,0,1358820,99193860,100552680,67941,0,6,6
downstream_01,CMTS,1506000433000000000,1000000000,795701,795701,677440,16776960,16776960,16776960,4327008,12285392,3689485,591300,591300,591300,4900,0,4900,245,0,1289380,94124740,95414120,64469,0,0,0
downstream_01,CMTS,1506000434000000000,1000000000,902298,902298,795702,16776960,16776960,16776960,4204652,12453395,4132099,591300,591300,591300,4840,0,4840,242,0,1478220,107910060,109388280,73911,0,0,0
downstream_01,CMTS,1506000435000000000,1000000000,805923,1770980,722700,16776960,16776960,16776960,7397047,12446520,3828053,722700,722700,591300,38136,0,38136,1126,0,1482660,108234180,109716840,74133,0,3,3
downstream_01,CMTS,1506000436000000000,1000000000,918345,918345,807380,16776960,16776960,16776960,4369913,12457794,3549640,722700,722700,722700,4860,0,4860,243,0,1502100,109653300,111155400,75105,0,0,0
downstream_01,CMTS,1506000437000000000,1000000000,962142,962142,918346,16776960,16776960,16776960,8272224,12435932,4278104,722700,722700,722700,4820,0,4820,241,0,1551280,113243440,114794720,77564,0,0,0
downstream_01,CMTS,1506000438000000000,1000000000,724169,1777550,580350,16776960,16776960,16776960,9915426,10324849,3872904,580350,722700,580350,70064,0,70064,1637,0,1179780,86123940,87303720,58989,0,9,9
downstream_01,CMTS,1506000439000000000,1000000000,843885,843885,724170,16776960,16776960,16776960,4193029,12464730,4103838,580350,580350,580350,4860,0,4860,243,0,1382940,100954620,102337560,69147,0,0,0
downstream_01,CMTS,1506000440000000000,1000000000,944686,944686,845340,16776960,16776960,16776960,6134771,12462262,3990314,580350,580350,580350,4840,0,4840,242,0,1536020,112129460,113665480,76801,0,0,0
downstream_01,CMTS,1506000441000000000,1000000000,731460,1650895,606630,16776960,16776960,16776960,4266295,12510254,3584019,606630,754455,580350,80820,0,80820,1661,0,1292200,94330600,95622800,64610,0,22,22
downstream_01,CMTS,1506000442000000000,1000000000,838041,838041,731461,16776960,16776960,16776960,4365227,12434589,3473508,606630,606630,606630,4840,0,4840,242,0,1385020,101106460,102491480,69251,0,0,0
downstream_01,CMTS,1506000443000000000,1000000000,944622,944622,839500,16776960,16776960,16776960,4957204,12540446,4135314,606630,606630,606630,4840,0,4840,242,0,1531300,111784900,113316200,76565,0,0,0
downstream_01,CMTS,1506000444000000000,1000000000,838048,1376415,701895,16776960,16776960,16776960,4158323,12313739,4072297,701895,701895,606630,24656,0,24656,862,0,1407600,102754800,104162400,70380,0,1,1
downstream_01,CMTS,1506000445000000000,1000000000,937336,937336,843880,16776960,16776960,16776960,5494981,12366428,4114004,701895,701895,701895,4860,0,4860,243,0,1531940,111831620,113363560,76597,0,0,0
downstream_01,CMTS,1506000446000000000,1000000000,824904,1571690,720510,16776960,16776960,16776960,5264187,12488834,4010927,720510,720510,701895,44572,0,44572,995,0,1473820,107588860,109062680,73691,0,5,5
downstream_01,CMTS,1506000447000000000,1000000000,940288,940288,824905,16776960,16776960,16776960,8330514,12568490,3656752,720510,720510,720510,4820,0,4820,241,0,1513400,110478200,111991600,75670,0,0,0
downstream_01,CMTS,1506000448000000000,1000000000,871625,1480805,739125,16776960,16776960,16776960,7253177,12535396,3814538,739125,739125,720510,42208,0,42208,919,0,1475620,107720260,109195880,73781,0,6,6
downstream_01,CMTS,1506000449000000000,1000000000,627800,1566580,586920,16776960,16776960,16776960,4262849,11376367,3578135,586920,739125,586920,60828,0,60828,1507,0,1520880,111024240,112545120,76044,0,8,8
downstream_01,CMTS,1506000450000000000,1000000000,741685,741685,627801,16776960,16776960,16776960,4106194,11308494,4023601,586920,586920,586920,4960,0,4960,248,0,1224440,89384120,90608560,61222,0,0,0
downstream_01,CMTS,1506000451000000000,1000000000,852644,852644,746060,16776960,16776960,16776960,8282740,12384046,4106522,586920,586920,586920,4860,0,4860,243,0,1411980,103074540,104486520,70599,0,0,0
downstream_01,CMTS,1506000452000000000,1000000000,633641,1463285,585825,16776960,16776960,16776960,5307633,10285248,3566228,585825,730365,585825,67840,0,67840,1476,0,1508600,110127800,111636400,75430,0,15,15
downstream_01,CMTS,1506000453000000000,1000000000,747529,747529,633642,16776960,16776960,16776960,5942194,11402003,3788914,585825,585825,585825,5020,0,5020,251,0,1220880,89124240,90345120,61044,0,0,0
downstream_01,CMTS,1506000454000000000,1000000000,864324,864324,747530,16776960,16776960,16776960,7282452,12525088,4112655,585825,585825,585825,4840,0,4840,242,0,1400320,102223360,103623680,70016,0,0,0
downstream_01,CMTS,1506000455000000000,1000000000,969462,969462,864325,16776960,16776960,16776960,7273857,12556473,4029260,585825,585825,585825,4860,0,4860,243,0,1551360,113249280,114800640,77568,0,0,0
downstream_01,CMTS,1506000456000000000,1000000000,886224,1424230,724890,16776960,16776960,16776960,4142792,12553696,4101151,724890,724890,585825,25152,0,25152,876,0,1428220,104260060,105688280,71411,0,1,1
downstream_01,CMTS,1506000457000000000,1000000000,769424,1389920,709560,16776960,16776960,16776960,6279009,12522728,3803058,709560,724890,709560,25320,0,25320,891,0,1543420,112669660,114213080,77171,0,2,2
downstream_01,CMTS,1506000458000000000,1000000000,584004,1360720,529980,16776960,16776960,16776960,4333702,10412144,3476158,529980,709560,529980,74696,0,74696,1515,0,1126600,82241800,83368400,56330,0,43,43
downstream_01,CMTS,1506000459000000000,1000000000,702264,702264,585460,16776960,16776960,16776960,7272926,10448023,4132746,529980,529980,529980,4880,0,4880,244,0,1149000,83877000,85026000,57450,0,0,0
downstream_01,CMTS,1506000460000000000,1000000000,851232,851232,702265,16776960,16776960,16776960,4199039,11651131,3338920,529980,529980,529980,4840,0,4840,242,0,1355880,98979240,100335120,67794,0,0,0
downstream_01,CMTS,1506000461000000000,1000000000,916898,916898,851233,16776960,16776960,16776960,7590815,12566001,4141591,529980,529980,529980,4860,0,4860,243,0,1523740,111233020,112756760,76187,0,0,0
downstream_01,CMTS,1506000462000000000,1000000000,747522,1518400,611010,16776960,16776960,16776960,7347807,12560061,3498175,611010,757740,529980,78796,0,78796,1614,0,1248720,91156560,92405280,62436,0,20,20
downstream_01,CMTS,1506000463000000000,1000000000,874572,874572,747523,16776960,16776960,16776960,7263824,12399482,3776105,611010,611010,611010,4840,0,4840,242,0,1426720,104150560,105577280,71336,0,0,0
downstream_01,CMTS,1506000464000000000,1000000000,786941,1399410,711750,16776960,16776960,16776960,7291926,12546582,4118683,711750,711750,611010,25368,0,25368,891,0,1508720,110136560,111645280,75436,0,1,1
downstream_01,CMTS,1506000465000000000,1000000000,899362,899362,786942,16776960,16776960,16776960,8247865,12328019,4078531,711750,711750,711750,4840,0,4840,242,0,1476460,107781580,109258040,73823,0,0,0
downstream_01,CMTS,1506000466000000000,1000000000,646784,1425325,586920,16776960,16776960,16776960,4093129,11067980,3833384,586920,712845,586920,61408,0,61408,1489,0,1450640,105896720,107347360,72532,0,17,17
downstream_01,CMTS,1506000467000000000,1000000000,765042,765042,649700,16776960,16776960,16776960,4456560,11995667,4081599,586920,586920,586920,4840,0,4840,242,0,1257000,91761000,93018000,62850,0,0,0
downstream_01,CMTS,1506000468000000000,1000000000,880386,880386,765043,16776960,16776960,16776960,4144822,12367436,4098262,586920,586920,586920,4860,0,4860,243,0,1452180,106009140,107461320,72609,0,0,0
downstream_01,CMTS,1506000469000000000,1000000000,1016164,1016164,884760,16776960,16776960,16776960,8221147,12469959,3956779,586920,586920,586920,4840,0,4840,242,0,1559240,113824520,115383760,77962,0,0,0
downstream_01,CMTS,1506000470000000000,1000000000,754824,1524605,606630,16776960,16776960,16776960,4182595,11377105,3591153,606630,761025,586920,74276,0,74276,1529,0,1259800,91965400,93225200,62990,0,17,17
downstream_01,CMTS,1506000471000000000,1000000000,871624,871624,756280,16776960,16776960,16776960,4107507,8406118,3783327,606630,606630,606630,4860,0,4860,243,0,1440480,105155040,106595520,72024,0,0,0
downstream_01,CMTS,1506000472000000000,1000000000,1331520,1331520,744600,16776960,16776960,16776960,9565167,12368503,4105861,740220,740220,606630,22744,0,22744,800,0,1528860,111606780,113135640,76443,0,1,1
downstream_01,CMTS,1506000473000000000,1000000000,744600,1451240,594585,16776960,16776960,16776960,4325825,10700330,3865429,594585,740220,594585,33752,0,33752,887,0,1235160,90166680,91401840,61758,0,4,4
downstream_01,CMTS,1506000474000000000,1000000000,857028,857028,744601,16776960,16776960,16776960,7268303,12541684,3447301,594585,594585,594585,4840,0,4840,242,0,1426360,104124280,105550640,71318,0,0,0
downstream_01,CMTS,1506000475000000000,1000000000,624881,1439560,580350,16776960,16776960,16776960,7215706,12354698,3843669,580350,718320,580350,62420,0,62420,1444,0,1499080,109432840,110931920,74954,0,10,10
downstream_01,CMTS,1506000476000000000,1000000000,735854,735854,624882,16776960,16776960,16776960,4308953,11927886,4098633,580350,580350,580350,4840,0,4840,242,0,1215280,88715440,89930720,60764,0,0,0
downstream_01,CMTS,1506000477000000000,1000000000,858481,858481,738760,16776960,16776960,16776960,4146900,12354494,4109957,580350,580350,580350,4840,0,4840,242,0,1412280,103096440,104508720,70614,0,0,0
downstream_01,CMTS,1506000478000000000,1000000000,943170,943170,859940,16776960,16776960,16776960,7302714,12423833,4100981,580350,580350,580350,4860,0,4860,243,0,1550580,113192340,114742920,77529,0,0,0
downstream_01,CMTS,1506000479000000000,1000000000,716872,1564755,588015,16776960,16776960,16776960,4346344,10594647,3489376,588015,735840,580350,86280,0,86280,1772,0,1246180,90971140,92217320,62309,0,23,23
downstream_01,CMTS,1506000480000000000,1000000000,839511,839511,721240,16776960,16776960,16776960,4335664,12398107,4117349,588015,588015,588015,4840,0,4840,242,0,1375140,100385220,101760360,68757,0,0,0
downstream_01,CMTS,1506000481000000000,1000000000,935870,935870,839512,16776960,16776960,16776960,6179862,8368300,3606285,588015,588015,588015,4860,0,4860,243,0,1553720,113421560,114975280,77686,0,0,0
downstream_01,CMTS,1506000482000000000,1000000000,708100,1539570,594585,16776960,16776960,16776960,4324379,12454183,3692978,594585,738030,588015,64892,0,64892,1525,0,1309180,95570140,96879320,65459,0,8,8
downstream_01,CMTS,1506000483000000000,1000000000,819067,819067,708101,16776960,16776960,16776960,7849873,8384666,4120052,594585,594585,594585,4840,0,4840,242,0,1366560,99758880,101125440,68328,0,0,0
downstream_01,CMTS,1506000484000000000,1000000000,928570,928570,819068,16776960,16776960,16776960,8234032,9901606,4101753,594585,594585,594585,4860,0,4860,243,0,1526800,111456400,112983200,76340,0,0,0
downstream_01,CMTS,1506000485000000000,1000000000,680361,1687395,623055,16776960,16776960,16776960,4182886,12435242,4062463,623055,779640,594585,88004,0,88004,1856,0,1479520,108004960,109484480,73976,0,36,36
downstream_01,CMTS,1506000486000000000,1000000000,810323,810323,681820,16776960,16776960,16776960,7264824,9294613,3483616,623055,623055,623055,4840,0,4840,242,0,1297980,94752540,96050520,64899,0,0,0
downstream_01,CMTS,1506000487000000000,1000000000,909587,909587,810324,16776960,16776960,16776960,8001271,8361180,4083497,623055,623055,623055,4860,0,4860,243,0,1500480,109535040,111035520,75024,0,0,0
downstream_01,CMTS,1506000488000000000,1000000000,840967,1712945,725985,16776960,16776960,16776960,4330180,12378294,4003541,725985,725985,623055,51072,0,51072,1084,0,1464120,106880760,108344880,73206,0,10,10
downstream_01,CMTS,1506000489000000000,1000000000,944621,944621,842420,16776960,16776960,16776960,5942664,9341352,4132663,725985,725985,725985,4840,0,4840,242,0,1542640,112612720,114155360,77132,0,0,0
downstream_01,CMTS,1506000490000000000,1000000000,702285,1545045,593490,16776960,16776960,16776960,6231109,12515527,3408895,593490,734745,593490,85772,0,85772,1806,0,1506880,110002240,111509120,75344,0,21,21
downstream_01,CMTS,1506000491000000000,1000000000,645325,1203040,600060,16776960,16776960,16776960,4223108,10300295,4002676,600060,600060,593490,31600,0,31600,1036,0,1548020,113005460,114553480,77401,0,3,3
downstream_01,CMTS,1506000492000000000,1000000000,769422,769422,646780,16776960,16776960,16776960,4285610,12293165,3508158,600060,600060,600060,4960,0,4960,248,0,1259920,91974160,93234080,62996,0,0,0
downstream_01,CMTS,1506000493000000000,1000000000,880384,880384,769423,16776960,16776960,16776960,8250606,12433788,4103271,600060,600060,600060,4860,0,4860,243,0,1456080,106293840,107749920,72804,0,0,0
downstream_01,CMTS,1506000494000000000,1000000000,677440,1747620,595680,16776960,16776960,16776960,4466943,9637593,3551512,595680,744600,595680,89048,0,89048,1810,0,1383380,100986740,102370120,69169,0,17,17
downstream_01,CMTS,1506000495000000000,1000000000,791332,791332,677441,16776960,16776960,16776960,4238627,10389735,4101521,595680,595680,595680,4860,0,4860,243,0,1291260,94261980,95553240,64563,0,0,0
downstream_01,CMTS,1506000496000000000,1000000000,874546,874546,792780,16776960,16776960,16776960,7763190,8414324,4000460,595680,595680,595680,3340,0,3340,167,0,987900,72115240,73103140,49395,0,0,0
downstream_01,CMTS,1506000497000000000,1000000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
`;


function refresh() {
    lists = parse_csv(document.getElementById('input').value)
    //print("After parsing:", lists)

    var ul = document.getElementById("fields");
    ul.innerHTML = ""
    for (var field in lists) {
        ul.innerHTML += '<li><input type="checkbox" id="' + field + '" onclick="refresh_graph()" >&nbsp' + field + '</input></li>';
    }

    refresh_graph()
}

function refresh_graph() {
    Plotly.newPlot('segments_graph', get_graphs("x segments", lists));
    Plotly.newPlot('rtt_graph', get_graphs("RTT", lists));
    Plotly.newPlot('cwnd_graph', get_graphs("Congestion Window", lists));
    Plotly.newPlot('rwnd_graph', get_graphs("Receive Window", lists));
}


function get_graphs(pattern, lists) {
    var result = [];
    for (var field in lists) {

        if (!field.includes(pattern) && !field.includes("Time[ns]")) {
            continue;
        }
        
        if (!document.getElementById(field).bb) {
            document.getElementById(field).checked = true;
            document.getElementById(field).bb = true
        }

        if (!document.getElementById(field).checked) {
            continue;
        }
        var item = {
            name: field,
            type: 'scatter'
        };

        if (!field.includes("Time[ns]")) {
            item.x = lists["time"];
            item.y = lists[field];
        }

        result.push(item);
    }
    console.log("result: " + JSON.stringify(result, null, 2));
    return result;
}
refresh();


</script>
