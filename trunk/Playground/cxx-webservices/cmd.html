<html>
<head>
    <style type="text/css">

        textarea {
            position: relative;
            padding: 10px;
            border-spacing: 50px;
            width: 100%;
            height: 100%;
        }

        div.inputTextArea {
            position: relative;
            height: 60%
        }

        div.outputTextArea {
            height: 30%
        }

        div.submitButton {
            text-align: right;
        }

        div {
            position: relative;
            width: 100%;
            height: 100%;
        }
        span {
            position: relative;
            width: 80%;
            height: 100%;
        }

    </style>
    <script type="text/javascript">


        var app = {};


        app.alert = function (msg) {
            //alert(msg);
            console.log(msg);
        };

        app.input = document.getElementById("input");
        app.inputMargin = 10;


        app.send = function (title, payload) {
            app.alert('app.send');
            var httpRequest = new XMLHttpRequest();
            httpRequest.open("PUT", "http://localhost:4000/" + title, false);
            httpRequest.send(payload);

            httpRequest.onreadystatechange = function () {
                if (httpRequest.readyState == 4) {
                    if (httpRequest.status == 200) {
                        app.alert('HTTP STATUS 200');
                        app.alert(JSON.stringify(httpRequest));
                        app.onReply(httpRequest.responseText);
                    } else {
                        app.alert("HTTP STATUS " + httpRequest.status);
                    }
                } else {
                    app.alert("HTTP STATUS " + httpRequest.status);
                    app.alert("httpRequest.readyState: " + httpRequest.readyState);
                }
            };
        };

        window.onload = function () {
            app.alert("window.onload");
            app.inputTextArea = document.getElementById("inputTextArea");
            app.outputTextArea = document.getElementById("outputText");
            app.submitButton = document.getElementById("compileButton");
            app.inputTextArea.style = { left:50, right:50, width:200 };
            app.enterTimeoutLoop();
        };


        app.enterTimeoutLoop = function () {
            app.alert("app.enterTimeoutLoop");
            window.setTimeout(app.enterTimeoutLoop, 2000);
        };


        app.onCompile = function () {
            app.alert('app.onCompile');
            var compileButton = document.getElementById('TextArea');
            alert("compile: " + compileButton.textContent);
            app.send("compile", compileButton.textContent);
        };

        app.onReply = function (reply) {
            app.alert(reply);
            app.alert(JSON.parse(reply));
            var obj = JSON.parse(reply);
        };


    </script>
</head>
<body>
<div class="inputTextArea">
    <label for="inputTextArea"><textarea id="inputTextArea">Hello! </textarea></label>
</div>
<div class="outputTextArea"><label for="outputTextArea"></label><textarea id="outputTextArea">You fool!</textarea>
</div>
<div class=submitButton>
    <button id="submitButton">Compile!</button>
</div>
</body>
</html>
